(title "extract <string>")

(expect:error
    "\(extract\) reference expected to be string or regex name"
    (fn (shield:validate null (shield:ruleset __inline__ extract true )))
    "extract invalid reference type"
)

(expect:error
    "\(extract\) undefined regex: my_regex"
    (fn (shield:validate null (shield:ruleset __inline__ extract "my_regex" )))
    "extract invalid regex"
)

(expect:eq
    "Nice"
    (shield:validate "hello Nice world" (shield:ruleset __inline__ extract "/nice/i" ))
    "extract using inline regex"
)

(expect:eq
    "2026"
    (shield:validate "this is 2026 year" (shield:ruleset __inline__ extract "number" ))
    "extract using named regex"
)

(expect:eq
    "1"
    (shield:validate true (shield:ruleset __inline__ extract "number" ))
    "extract using named regex from non-string"
)
